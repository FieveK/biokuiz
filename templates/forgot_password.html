{% extends "base.html" %}
{% block content %}
<style>
.auth-container {
  max-width: 420px;
  margin: 80px auto;
  background: var(--bs-light);
  border-radius: 20px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  padding: 2rem;
  text-align: center;
  position: relative;
}

.auth-container h2 {
  color: #2e7d32;
  font-weight: 700;
}

/* Modal Styling */
.modal-link {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 1000;
  justify-content: center;
  align-items: center;
}
.modal-content {
  background: white;
  padding: 25px;
  border-radius: 15px;
  max-width: 480px;
  text-align: center;
  animation: fadeIn 0.3s ease-in-out;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}
.modal-content a {
  color: #2e7d32;
  font-weight: bold;
  text-decoration: none;
}
.modal-content button {
  margin-top: 15px;
  background: #4CAF50;
  border: none;
  color: white;
  padding: 8px 20px;
  border-radius: 10px;
}
</style>

<div class="auth-container animate__animated animate__fadeInDown">
  <h2>üîë Lupa Password</h2>
  <p class="text-muted mb-4">Masukkan <strong>username</strong> Anda untuk mendapatkan tautan reset password.</p>

  <form method="POST">
    <div class="mb-3 text-start">
      <label class="form-label fw-semibold">Username</label>
      <input type="text" name="email" class="form-control" placeholder="Masukkan username Anda" required>
    </div>
    <button type="submit" class="btn btn-success w-100 py-2">üì© Kirim Link Reset</button>
  </form>

  <hr>
  <p class="mt-3"><a href="{{ url_for('login') }}">‚¨ÖÔ∏è Kembali ke Login</a></p>
</div>

{% if reset_link %}
<!-- Pop-up elegan -->
<div id="popup" class="modal-link" style="display:flex;">
  <div class="modal-content shadow-lg">
    <div style="text-align:center;">
      <div style="
        font-size: 50px;
        color: #4CAF50;
        margin-bottom: 10px;
      ">‚úÖ</div>

      <h4 style="color:#2e7d32; font-weight:700; margin-bottom:10px;">
        Link Reset Password
      </h4>

      <p style="color:#555; font-size:0.95rem; margin-bottom:15px;">
        Salin atau klik tautan di bawah untuk mengatur ulang password Anda:
      </p>

      <div style="
        background:#f6fff6;
        border:1px solid #b2dfdb;
        border-radius:10px;
        padding:10px;
        margin-bottom:20px;
        word-break:break-all;
        font-family:monospace;
        color:#2e7d32;
      ">
        <a href="{{ reset_link }}" target="_blank" style="color:#1b5e20; text-decoration:none;">
          {{ reset_link }}
        </a>
      </div>

      <button onclick="closePopup()" class="btn btn-success px-4 py-2 rounded-pill shadow-sm">
        Tutup
      </button>
    </div>
  </div>
</div>
</div>

<script>
function closePopup() {
  const popup = document.getElementById('popup');
  popup.style.opacity = '0';
  setTimeout(() => popup.style.display = 'none', 300);
}
</script>
{% endif %}
{% endblock %}
